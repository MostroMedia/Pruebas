<!DOCTYPE html>
<html style="width: 100%;height: 100%">
<head>
    <style type="text/css">
body, html{
  margin:0;
  width:100%;
  height:100%;
  background-color:#141414;

}
#container{
  width: 100%;
  height:100%;
  overflow: hidden;
  cursor: pointer;
}
div{
  font-size:0px;
}
    </style>
     
</head>
<body>

<!--<div style="width:700px;height:394px;position: absolute;left:0;right:0;top:0;bottom:0;margin:auto" id="bodymovin"></div>-->

<div id='container'></div>
<script src="js/bodymovin.js"></script>
<script>

    // Iniciar Contador en cero
    var count = 0;
    
    // llamar informacion de container
    var container = document.getElementById('container');
    
    // guardar los datos de la animacion como un svg y ponerlo en loop
    var animData = { 
        container: container, 
        renderer: 'svg',
        loop: true,
        prerender: false,
        autoplay: false,
        autoloadSegments: false,
        path: 'js/data.json'
    };

    var anim; 
    var isThrowing = false; //Lanzamiento = false

    /* global bodymovin */
    anim = bodymovin.loadAnimation(animData); // Cargar animData y guardarla en anim
    anim.addEventListener('DOMLoaded',startAnimation); //Evento del tipo DOM, que llama el parametro inciar animacion
    container.onclick = throwPancake; //Evento de al hacer click llame la funcion de throwPancake (lanzar pancake)
    
    // Funcion para cuando se complete el evento de lanzar pancake vuelva al inicio
    function throwComplete(){
        isThrowing = false; 
        anim.removeEventListener('loopComplete',throwComplete); // remover evento añadido previamente
    }
    
    //Funcion para lanzar el pancake
    function throwPancake(){
      
        if(isThrowing){ //Condicional para que la animación no se trabe cuando el usuario haga click mientras lanza pancake
            return; //Para la funcion y devuelve el valor en este caso nada :s
        }
        isThrowing = true;
        anim.playSegments([[15,49],[10,19]],true);
        anim.addEventListener('loopComplete',throwComplete);
    }

    function startAnimation(){
        anim.playSegments([0,19],true);
    }



    // var animData = {
    //     wrapper: document.getElementById('bodymovin'),
    //     animType: 'svg',
    //     loop: true,
    //     prerender: true,
    //     autoplay: true,
    //     path: 'js/data.json'
    // };
    // var anim = bodymovin.loadAnimation(animData);
    // bodymovin.setSubframeRendering(false);
</script>
</body>
</html>